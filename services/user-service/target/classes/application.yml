# Base configuration - minimal global settings
# Profile-specific overrides are in application-{profile}.yml
# Default profile is set to 'dev' for local development
# Override with --spring.profiles.active=prod for production

server:
  port: 8082

spring:
  application:
    name: user-service
  
  # Set dev profile as default for local development
  # Override with --spring.profiles.active=prod for production
  profiles:
    active: dev
  
  # Database Configuration (fallback defaults - should be overridden by profiles)
  datasource:
    url: ${DB_URL:jdbc:mysql://localhost:3306/userdb?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC}
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:}
    driver-class-name: com.mysql.cj.jdbc.Driver
  
  jpa:
    hibernate:
      # Use 'none' or 'validate' when Flyway manages migrations
      ddl-auto: validate
    show-sql: true
  
  flyway:
    enabled: true
    baseline-on-migrate: true
    # Use separate Flyway schema history table for user-service
    table: flyway_user_service_schema_history

logging:
  level:
    root: INFO
    com.workflow.userservice: DEBUG

